(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[417],{7532:function(a,b,c){(window.__NEXT_P=window.__NEXT_P||[]).push(["/create",function(){return c(5110)}])},6482:function(a,b,c){"use strict";c.d(b,{"_":function(){return d}});var d=function(){return{localStorage:localStorage}}},5110:function(a,b,c){"use strict";c.r(b),c.d(b,{default:function(){return r}});var d=c(7568),e=c(4924),f=c(6042),g=c(9396),h=c(603),i=c(4051),j=c.n(i),k=c(5893),l=c(1163),m=c(7294),n=c(7536),o=c(6482),p=function(){var a,b=(0,m.useState)({}),c=b[0],e=b[1],g=(0,m.useState)({}),h=g[0],i=g[1],k=(0,m.useCallback)((0,d.Z)(j().mark(function a(){var b,c;return j().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,fetch("/master/index.json");case 2:return b=a.sent,a.next=5,b.json();case 5:e(c=a.sent);case 7:case"end":return a.stop()}},a)})),[]);(0,m.useEffect)(function(){k()},[k]);var l=(0,m.useCallback)((a=(0,d.Z)(j().mark(function a(b){var c,d;return j().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,fetch("/master/".concat(b,".json"));case 2:return c=a.sent,a.next=5,c.json();case 5:return d=a.sent,i((0,f.Z)({},h,d)),a.abrupt("return",d);case 8:case"end":return a.stop()}},a)})),function(b){return a.apply(this,arguments)}),[h]);return{index:c,master:h,fetchMaster:l}},q=function(){var a,b=(0,l.useRouter)(),c=p(),i=c.index,q=c.master,r=c.fetchMaster,s=(0,o._)().localStorage,t=(0,m.useMemo)(function(){return b.query.name},[b]),u=(0,n.cI)({shouldUnregister:!0}),v=u.register,w=u.handleSubmit,x=u.watch,y=u.setValue,z=x("musicSet"),A=x("instrument"),B=(0,m.useMemo)(function(){return Object.keys(i)},[i]),C=(0,m.useState)([]),D=C[0],E=C[1],F=(0,m.useState)({}),G=F[0],H=F[1],I=(0,m.useCallback)((a=(0,d.Z)(j().mark(function a(b){var c,d;return j().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:if(!(c=q[b])){a.next=5;break}E(Object.keys(c)),a.next=9;break;case 5:return a.next=7,r(i[b]);case 7:E(Object.keys((d=a.sent)[b]));case 9:H({}),y("instrument","");case 11:case"end":return a.stop()}},a)})),function(b){return a.apply(this,arguments)}),[r,i,q,y]);(0,m.useEffect)(function(){Object.keys(i).length>0&&(y("musicSet","ブラームス交響曲セット"),I("ブラームス交響曲セット"))},[i,I,y]);var J=(0,m.useCallback)(function(){if(void 0!==s){var a=s.getItem("result");return null!=a?JSON.parse(a):void 0}},[s]),K=(0,m.useCallback)(function(a){if(void 0!==s){var c,d=null!==(c=J())&& void 0!==c?c:{};0===Object.keys(d).length&&(d.name=t,d.initSet={musicSet:z,instrument:A}),d.musicSet||(d.musicSet=(0,e.Z)({},z,(0,e.Z)({},A,{}))),d.musicSet[z]||(d.musicSet[z]=(0,e.Z)({},A,{})),d.musicSet[z][A]||(d.musicSet[z][A]={}),Object.entries(G).forEach(function(b){var c=(0,h.Z)(b,2),e=c[0],f=c[1];d.musicSet[z][A][e]={},f.forEach(function(b){d.musicSet[z][A][e][b]=a["".concat(A,"_").concat(e,"_").concat(b)]})}),s.setItem("result",JSON.stringify(d)),b.push("/result?l=".concat(z,": ").concat(A))}},[s,J,z,A,G,b,t]);return 0===Object.keys(i).length?(0,k.jsx)(k.Fragment,{}):(0,k.jsxs)(k.Fragment,{children:[(0,k.jsxs)("h1",{className:"text-center",children:[t," さんの乗り番入力"]}),(0,k.jsxs)("form",{onSubmit:w(K),children:[(0,k.jsx)("select",(0,g.Z)((0,f.Z)({className:"form-select","aria-label":"musicSet"},v("musicSet",{onChange:function(a){return I(a.target.value)}})),{children:B.map(function(a){return(0,k.jsx)("option",{value:a,children:a},a)})})),(0,k.jsxs)("select",(0,g.Z)((0,f.Z)({className:"form-select","aria-label":"instrument"},v("instrument",{onChange:function(a){H(q[z][a.target.value]);var b=J();void 0!==b&& void 0!==b.musicSet[z]&& void 0!==b.musicSet[z][a.target.value]&&Object.entries(b.musicSet[z][a.target.value]).forEach(function(b){var c=(0,h.Z)(b,2),d=c[0];Object.entries(c[1]).forEach(function(b){var c=(0,h.Z)(b,2),e=c[0],f=c[1];y("".concat(a.target.value,"_").concat(d,"_").concat(e),f)})})}})),{children:[(0,k.jsx)("option",{value:"",children:"楽器を選択"}),D.map(function(a){return(0,k.jsx)("option",{value:a,children:a},a)})]})),Object.entries(null!=G?G:{}).map(function(a){var b=(0,h.Z)(a,2),c=b[0],d=b[1];return(0,k.jsxs)(k.Fragment,{children:[(0,k.jsx)("p",{className:"mt-3",children:c}),d.map(function(a){var b="".concat(A,"_").concat(c,"_").concat(a);return(0,k.jsxs)("div",{className:"form-check form-check-inline",children:[(0,k.jsx)("input",(0,g.Z)((0,f.Z)({className:"form-check-input",type:"checkbox"},v(b)),{name:b})),(0,k.jsx)("label",{className:"form-check-label",htmlFor:b,children:a})]},b)})]})}),(0,k.jsx)("div",{className:"d-grid mt-3",children:(0,k.jsx)("button",{type:"submit",className:"btn btn-primary",children:"結果表示"})})]})]})},r=q}},function(a){a.O(0,[346,774,888,179],function(){var b;return a(a.s=7532)}),_N_E=a.O()}])